<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>React</title>
  <style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0;
}


/* Base color: saturation 0; */

.hljs,
.hljs-subst {
  color: #444;
}

.hljs-comment {
  color: #888888;
}

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold;
}


/* User color: hue: 0 */

.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000;
}

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold;
}

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060;
}


/* Language color: hue: 90; */

.hljs-literal {
  color: #78A960;
}

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300;
}


/* Meta color: hue: 200 */

.hljs-meta {
  color: #1f7199;
}

.hljs-meta-string {
  color: #4d99bf;
}


/* Misc effects */

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
</head>

<body>
  <div id="canvas">
    <div id="canvas-content">

      <section class="section" id="section-1"><section class="slide" id="slide-1-1"><h1>React</h1>
</section><section class="slide" id="slide-1-2"><h2>Presentation and code</h2>
<p>Presentations available at: <a href="https://karuga.eu/courses-presentations">https://karuga.eu/courses-presentations</a></p>
<p>Code available at: <a href="https://github.com/marko-knoebl/courses-code">https://github.com/marko-knoebl/courses-code</a></p>
</section><section class="slide" id="slide-1-3"><h2>Your Trainer</h2>
<p>Marko Knöbl</p>
<ul>
<li>Frontend Web-Development<ul>
<li>JavaScript</li>
<li>React, Angular</li>
</ul>
</li>
<li>Programming<ul>
<li>Python, JavaScript</li>
</ul>
</li>
</ul>
</section><section class="slide" id="slide-1-4"><h2>Introduction of Participants</h2>
<ul>
<li>Name</li>
<li>Company</li>
<li>Current Projects</li>
<li>Prior Knowledge</li>
<li>Expectations</li>
</ul>
</section><section class="slide" id="slide-1-5"><h2>Organizational</h2>
<ul>
<li>Duration</li>
<li>Breaks</li>
<li>Materials</li>
<li>Questions, Feedback?</li>
</ul>
</section></section><section class="section" id="section-2"><section class="slide" id="slide-2-1"><h1>Agenda</h1>
<ul>
<li>Overview of React</li>
<li>Modern JS / JS-Basics for React</li>
<li>Declarative Rendering / Working with application state</li>
<li>Components</li>
<li>Using predefined Components</li>
<li>State-Managment with Redux</li>
<li>Routing</li>
<li>Testing Components</li>
<li>Progressive Web Apps</li>
</ul>
</section></section><section class="section" id="section-3"><section class="slide" id="slide-3-1"><h1>React.js</h1>
</section><section class="slide" id="slide-3-2"><h2>What is React?</h2>
<ul>
<li>One of the 3 big JavaScript-UI-Libraries (besides Angular, vue.js)</li>
</ul>
</section><section class="slide" id="slide-3-3"><h2>Basics of modern JavaScript-UI-Libraries</h2>
<ul>
<li>declarative</li>
<li>component-based</li>
</ul>
</section><section class="slide" id="slide-3-4"><h2>declarative</h2>
<ul>
<li>In the Background there is a data model which describes the entire application state</li>
<li>The data model changes in response to user interactions, causing the view to update automatically (and efficiently)</li>
</ul>
</section><section class="slide" id="slide-3-5"><h2>component-based</h2>
<ul>
<li>&quot;custom&quot; HTML-Tags</li>
<li>data-flow via props and events</li>
<li>usually unidirectional dataflow (from parent to child)</li>
</ul>
</section><section class="slide" id="slide-3-6"><h2>What makes React special?</h2>
<ul>
<li>JavaScript-based template-syntax</li>
<li>explicit Mutations of state via <em>setState()</em></li>
</ul>
</section><section class="slide" id="slide-3-7"><h2>History of React</h2>
<ul>
<li>used internally at Facebook from 2011</li>
<li>open source since 2013</li>
<li>current major version: React 16 (September 2017)</li>
</ul>
</section><section class="slide" id="slide-3-8"><h2>Example: data model and data flow in a Todo app</h2>
<p><img src="./images/todo-components-datamodel.svg" alt="image: data model in a todo app"/></p>
</section></section><section class="section" id="section-4"><section class="slide" id="slide-4-1"><h1>React.js - Basics</h1>
</section><section class="slide" id="slide-4-2"><h2>Developing with node.js and npm</h2>
<ul>
<li>node.js: JS-Runtime<ul>
<li>Running the testservr</li>
<li>unit-tests</li>
</ul>
</li>
<li>npm: package manager<ul>
<li>managing dependencies</li>
<li>packages are located in the <em>node_modules</em> - Directory</li>
<li>configuration via <em>package.json</em></li>
</ul>
</li>
</ul>
</section><section class="slide" id="slide-4-3"><h2>create-react-app</h2>
<p>most-used method for generating React projects: <em>create-react-app</em></p>
<p>run it via:</p>
<pre class="code">npx create-react-app playground</pre><p>see also: <a href="https://reactjs.org/docs/add-react-to-a-new-app.html">https://reactjs.org/docs/add-react-to-a-new-app.html</a></p>
</section><section class="slide" id="slide-4-4"><h2>default project structure</h2>
<ul>
<li><code>public/index.html</code>, <code>src/index.js</code>: entry points</li>
<li><code>App.js</code>, <code>App.css</code>: define the App component</li>
<li><code>node_modules</code>: dependencies</li>
</ul>
</section><section class="slide" id="slide-4-5"><h2>test server and build</h2>
<p>inside the project directory:</p>
<ul>
<li><code>npm start</code>: starts the test server</li>
<li><code>npm run build</code>: creates a build (for deployment)</li>
</ul>
</section><section class="slide" id="slide-4-6"><h2>JSX: JS + XML</h2>
<p>JSX = Template language of React</p>
<ul>
<li><strong>&lt;</strong> switches from JS to XML/HTML</li>
<li><strong>{</strong> switches back to JS</li>
</ul>
</section><section class="slide" id="slide-4-7"><h2>JSX: JS + XML</h2>
<pre class="code">el = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello, I am {2018 - 1970} years old.<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;</pre></section><section class="slide" id="slide-4-8"><h2>JSX: Simple tasks</h2>
<ul>
<li>Show the current date</li>
<li>Show a random roulette number (0-36)</li>
</ul>
</section><section class="slide" id="slide-4-9"><h2>component state</h2>
<p>A component which will update its state every second:</p>
<pre class="code"><span class="hljs-keyword">constructor</span> () {
  <span class="hljs-keyword">super</span>();
  <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">now</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() };
  setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">now</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() });
  }, <span class="hljs-number">1000</span>);
};</pre><pre class="code">&lt;div&gt;{<span class="hljs-keyword">this</span>.state.now.toLocaleTimeString()}&lt;<span class="hljs-regexp">/div&gt;</span></pre></section></section><section class="section" id="section-5"><section class="slide" id="slide-5-1"><h1>ES2015+</h1>
<h2>Modern JavaScript</h2>
</section><section class="slide" id="slide-5-2"><h2>JavaScript standardisation</h2>
<p>JavaScript is standardised under the name <em>ECMAScript</em> (ES)</p>
</section><section class="slide" id="slide-5-3"><h2>JavaScript: versions</h2>
<ul>
<li>Supported by all Browsers: ES5 (standardised in 2009)</li>
<li>Next big version: <em>ES2015</em> (or ES6)</li>
<li>Since then: yearly updates (ES2016, ES2017, ...)</li>
</ul>
</section><section class="slide" id="slide-5-4"><h2>JavaScript: version support</h2>
<ul>
<li>Overview: see <a href="http://kangax.github.io/compat-table/es6/">http://kangax.github.io/compat-table/es6/</a></li>
<li>In practice: Modern JavaScript is transpiled to ES5 (via Babel, webpack)</li>
</ul>
</section><section class="slide" id="slide-5-5"><h2>Important changes in ES2015</h2>
</section><section class="slide" id="slide-5-6"><h2>modules &amp; imports</h2>
<ul>
<li>It&#39;s possible to import objects from other js-files - no more global namespace</li>
<li>Is handled by webpack in most cases</li>
</ul>
<pre class="code"><span class="hljs-comment">// user.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
  ...
}</pre><pre class="code"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">'user.js'</span>;</pre></section><section class="slide" id="slide-5-7"><h2>modules &amp; imports</h2>
<pre class="code"><span class="hljs-comment">// user.js</span>
<span class="hljs-comment">// there may be 1 default export</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
   ...
}</pre><pre class="code"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> User <span class="hljs-keyword">from</span> <span class="hljs-string">'user.js'</span>;</pre></section><section class="slide" id="slide-5-8"><h2>let</h2>
<ul>
<li>New alternative to <code>var</code> - with different scoping</li>
<li>variables scope: surrounding curly braces (instead of surrounding function)</li>
</ul>
<pre class="code"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">let</span> a = <span class="hljs-number">3</span>;
}
<span class="hljs-built_in">console</span>.log(a); <span class="hljs-comment">// ReferenceError</span></pre></section><section class="slide" id="slide-5-9"><h2>const</h2>
<p>Declares a variable that cannot be reassigned.
However, the named object itself may be modified.</p>
<pre class="code"><span class="hljs-keyword">const</span> names = [<span class="hljs-string">'Alice'</span>, <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'Claire'</span>];
names = [<span class="hljs-string">'Andrew'</span>, <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'Claire'</span>]; <span class="hljs-comment">// invalid!</span>
names[<span class="hljs-number">0</span>] = <span class="hljs-string">'Andrew'</span>; <span class="hljs-comment">// valid</span></pre></section><section class="slide" id="slide-5-10"><h2>arrow functions / lambdas</h2>
<ul>
<li>short notation for anonymous functions</li>
<li>leaves <em>this</em> unchanged (does not reassign)</li>
</ul>
<pre class="code"><span class="hljs-keyword">let</span> multiply = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> a * b;
};
<span class="hljs-keyword">let</span> multiply = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a * b;</pre></section><section class="slide" id="slide-5-11"><h2>classes</h2>
<p>Class syntax replaces the old constructor functions and prototypes</p>
</section><section class="slide" id="slide-5-12"><h2>classes</h2>
<pre class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{
  <span class="hljs-keyword">constructor</span>(firstName, lastName) {
    <span class="hljs-keyword">this</span>.firstName = firstName;
    <span class="hljs-keyword">this</span>.lastName = lastName;
  }
  hello() {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`My name is <span class="hljs-subst">${<span class="hljs-keyword">this</span>.firstName}</span>`</span>;
  }
}</pre></section><section class="slide" id="slide-5-13"><h2>inheritance</h2>
<pre class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Person</span> </span>{
  <span class="hljs-keyword">constructor</span>(firstName, lastName, userName) {
    <span class="hljs-comment">// calls Person.constructor</span>
    <span class="hljs-keyword">super</span>(firstName, lastName);
    <span class="hljs-keyword">this</span>.userName = userName;
  }
}</pre></section><section class="slide" id="slide-5-14"><h2>Array iteration (for ... of)</h2>
<p>Iterating over entries of an array:</p>
<pre class="code"><span class="hljs-keyword">let</span> names = [<span class="hljs-string">'Anna'</span>, <span class="hljs-string">'Bernhard'</span>, <span class="hljs-string">'Caro'</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> name <span class="hljs-keyword">of</span> names) {
  <span class="hljs-built_in">console</span>.log(name);
}</pre></section><section class="slide" id="slide-5-15"><h2>spread syntax (arrays)</h2>
<pre class="code"><span class="hljs-keyword">let</span> squares = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>];
<span class="hljs-keyword">let</span> moreSquares = [...squares, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>];
<span class="hljs-comment">// moreSquares: [1, 4, 9, 16, 25]</span></pre></section><section class="slide" id="slide-5-16"><h2>spread syntax (arrays)</h2>
<pre class="code"><span class="hljs-keyword">let</span> person = {
  <span class="hljs-attr">firstName</span>: <span class="hljs-string">'John'</span>,
  <span class="hljs-attr">lastName</span>: <span class="hljs-string">'Doe'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">31</span>,
};
<span class="hljs-keyword">let</span> updatedPerson = {
  ...person,
  <span class="hljs-attr">email</span>: <span class="hljs-string">'j@d.com'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">32</span>,
};
<span class="hljs-comment">// {firstName: 'John', lastName: 'Doe', email: 'j@d.com', age: 32}</span></pre></section><section class="slide" id="slide-5-17"><h2>template strings</h2>
<ul>
<li>new syntax for <em>creating</em> strings</li>
<li>delimited via backticks</li>
<li>enables multiline string literals and interpolation</li>
</ul>
<pre class="code"><span class="hljs-keyword">let</span> name = <span class="hljs-string">'Anton'</span>;
<span class="hljs-keyword">let</span> greeting = <span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!
                This is ES2015!`</span>;</pre></section><section class="slide" id="slide-5-18"><h2>default arguments</h2>
<p>Functions may now have default arguments</p>
<pre class="code"><span class="hljs-keyword">let</span> join = <span class="hljs-function">(<span class="hljs-params">strings, separator=<span class="hljs-string">''</span></span>) =&gt;</span> {
  ...
}</pre></section></section><section class="section" id="section-6"><section class="slide" id="slide-6-1"><h2>ESLint</h2>
<p>JavaScript-Linter</p>
<ul>
<li>VS Code plugin</li>
</ul>
<div class="note"> 
Bei Nutzung von create-react-app: vorkonfiguriert

ansonsten:

npm packages:

- `eslint`
- `eslint-plugin-react`

.eslintrc:

```json
{
  "extends": "react-app"
}
```
 </div></section></section><section class="section" id="section-7"><section class="slide" id="slide-7-1"><h2>Prettier</h2>
<p><a href="https://prettier.io/">https://prettier.io/</a></p>
<ul>
<li>Code-Formatting according to strict rules</li>
<li>VS Code plugin (via Alt + Shift + F)</li>
</ul>
</section><section class="slide" id="slide-7-2"><h2>Prettier configuration</h2>
<p>in VS Code: via File - Preferences - Settings</p>
<p>or via <code>.prettierrc.json</code>:</p>
<pre class="code">{
  <span class="hljs-attr">"bracketSpacing"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"singleQuote"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"trailingComma"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"jsxBracketSameLine"</span>: <span class="hljs-literal">true</span>
}</pre></section></section><section class="section" id="section-8"><section class="slide" id="slide-8-1"><h1>JavaScript basics for React</h1>
</section><section class="slide" id="slide-8-2"><h2>map, filter, reduce</h2>
<ul>
<li>Array methods for functional programming</li>
</ul>
</section><section class="slide" id="slide-8-3"><h2>map</h2>
<ul>
<li>modifies each entry in an array via a function</li>
<li>returns a new array</li>
</ul>
<pre class="code"><span class="hljs-keyword">let</span> myNumbers = [<span class="hljs-number">2</span>, <span class="hljs-number">10</span>, <span class="hljs-number">23</span>];

<span class="hljs-keyword">let</span> triple = <span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> <span class="hljs-number">3</span> * n;

<span class="hljs-keyword">let</span> newNumbers = myNumbers.map(triple);
<span class="hljs-comment">// [6, 30, 69]</span></pre></section><section class="slide" id="slide-8-4"><h2>filter</h2>
<ul>
<li>only keeps specific entries in an array</li>
<li>uses a function to check entries for a specific criterion</li>
<li>returns a new array</li>
</ul>
<pre class="code"><span class="hljs-keyword">let</span> myNumbers = [<span class="hljs-number">2</span>, <span class="hljs-number">10</span>, <span class="hljs-number">23</span>];

<span class="hljs-keyword">let</span> isEven = <span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;

<span class="hljs-keyword">let</span> newNumbers = myNumbers.filter(isEven);
<span class="hljs-comment">// [2, 10]</span></pre></section><section class="slide" id="slide-8-5"><h2>reduce</h2>
<ul>
<li>computes one value based on a start value and all entries in an array</li>
</ul>
<pre class="code"><span class="hljs-keyword">let</span> myNumbers = [<span class="hljs-number">2</span>, <span class="hljs-number">10</span>, <span class="hljs-number">23</span>];

<span class="hljs-keyword">let</span> multiply = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a * b;

<span class="hljs-keyword">let</span> result = myNumbers.reduce(multiply, <span class="hljs-number">1</span>);</pre></section><section class="slide" id="slide-8-6"><h2>this</h2>
<p>in object methods, <code>this</code> usually refers to the current object</p>
<p><strong>however</strong>, keep in mind:</p>
<ul>
<li>each function call sets <code>this</code> (not just method calls)</li>
<li><code>this</code> will only be set correctly if the method is called via the syntax <code>object.method()</code></li>
</ul>
</section><section class="slide" id="slide-8-7"><h2>problem: <em>this</em> in anonymous functions</h2>
<pre class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myComponent</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-comment">// this ist set correctly here</span>
    <span class="hljs-keyword">this</span>.foo = <span class="hljs-literal">true</span>;
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-comment">// this will be overwritten here (to 'window')</span>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.foo);
    }, <span class="hljs-number">1000</span>);
  }
}</pre></section><section class="slide" id="slide-8-8"><h2>solution 1: <em>that</em> / <em>self</em></h2>
<pre class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myComponent</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-comment">// this ist set correctly here</span>
    <span class="hljs-keyword">this</span>.foo = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">let</span> that = <span class="hljs-keyword">this</span>;
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-comment">// this will be overwritten here (to 'window')</span>
      <span class="hljs-built_in">console</span>.log(that.foo);
    }, <span class="hljs-number">1000</span>);
  }
}</pre></section><section class="slide" id="slide-8-9"><h2>solution 2: <em>arrow functions</em></h2>
<pre class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myComponent</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-comment">// this ist set correctly here</span>
    <span class="hljs-keyword">this</span>.foo = <span class="hljs-literal">true</span>;
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-comment">// this will *not* be overwritten here</span>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.foo);
    }, <span class="hljs-number">1000</span>);
  }
}</pre></section><section class="slide" id="slide-8-10"><h2>problem: method calls without using method syntax</h2>
<pre class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.message = <span class="hljs-string">'hello'</span>;
  }
  greet() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.message);
  }
}
<span class="hljs-keyword">let</span> f = <span class="hljs-keyword">new</span> Foo();
f.greet(); <span class="hljs-comment">// works</span>
<span class="hljs-keyword">let</span> fg = f.greet;
fg(); <span class="hljs-comment">// doesn't work (this is undefined)</span></pre></section><section class="slide" id="slide-8-11"><h2>solution: arrow methods</h2>
<p>Available since ES2018:</p>
<pre class="code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.message = <span class="hljs-string">'hello'</span>;
  }
  greet = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.message);
  };
}</pre></section><section class="slide" id="slide-8-12"><h2>solution: binding the method</h2>
<pre class="code"><span class="hljs-keyword">let</span> f = <span class="hljs-keyword">new</span> Foo();
f.greet(); <span class="hljs-comment">// works</span>
<span class="hljs-keyword">let</span> fg = f.greet.bind(f);
fg(); <span class="hljs-comment">// works as well now</span></pre><p>Methods are usually bound in the constructor:</p>
<pre class="code">  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.greet = <span class="hljs-keyword">this</span>.greet.bind(<span class="hljs-keyword">this</span>);
  }</pre></section></section><section class="section" id="section-9"><section class="slide" id="slide-9-1"><h1>React.js - basics II</h1>
</section><section class="slide" id="slide-9-2"><h2>JSX compilation</h2>
<!-- prettier-ignore --><pre class="code"><span class="hljs-keyword">const</span> element = (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"greeting"</span>&gt;</span>
    Hello, world!
  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
);</pre><p>is compiled to:</p>
<pre class="code"><span class="hljs-keyword">const</span> element = React.createElement(
  <span class="hljs-string">'h1'</span>,
  { <span class="hljs-attr">className</span>: <span class="hljs-string">'greeting'</span> },
  <span class="hljs-string">'Hello, world!'</span>
);</pre></section><section class="slide" id="slide-9-3"><h2>JSX: Properties</h2>
<p>Changing from XML to JS also works in properties:</p>
<pre class="code">&lt;a href={<span class="hljs-string">'https://en.wikipedia.org/wiki/'</span> + articleName}&gt;
  some article
&lt;<span class="hljs-regexp">/a&gt;</span></pre><p>note the missing quotation marks for the href property</p>
</section><section class="slide" id="slide-9-4"><h2>JSX Properties: Task</h2>
<ul>
<li>Show a random picture. Use this function:</li>
</ul>
<pre class="code"><span class="hljs-keyword">const</span> getImgUrl = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span>
  <span class="hljs-string">'https://picsum.photos/200?image='</span> +
  <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">100</span>);</pre></section><section class="slide" id="slide-9-5"><h2>JSX: events</h2>
<pre class="code"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"></span>) </span>{...}

&lt;button onClick={hello}&gt;Say Hello&lt;<span class="hljs-regexp">/button&gt;</span></pre><p>list of browser events:<br/><a href="https://www.w3schools.com/jsref/dom_obj_event.asp">https://www.w3schools.com/jsref/dom_obj_event.asp</a></p>
</section><section class="slide" id="slide-9-6"><h2>JSX: methods as event handlers</h2>
<p>Careful: If class methods are used as event handlers they should either be defined as arrow methods or be assigned to the instance via <code>.bind()</code>.</p>
</section><section class="slide" id="slide-9-7"><h2>browser events: example</h2>
<ul>
<li>simple button (Hello world)</li>
</ul>
</section><section class="slide" id="slide-9-8"><h2>JSX: repeating elements</h2>
<p>Multiple Elements may be added via arrays:</p>
<pre class="code"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
  { [
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>,
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  ] }
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></pre></section><section class="slide" id="slide-9-9"><h2>JSX: repeating elements</h2>
<p>In practice this is mostly done via the <code>.map()</code> method</p>
<!-- prettier-ignore-start -->
<pre class="code"><span class="hljs-keyword">let</span> todos = [ { <span class="hljs-attr">title</span>: <span class="hljs-string">'groceries'</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> }, ... ];

<span class="hljs-keyword">let</span> list = (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    {todos.map(todo =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{todo.title}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    ))}
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
);</pre><!-- prettier-ignore-end -->
</section><section class="slide" id="slide-9-10"><h2>JSX: repeating elements</h2>
<p>With the above code:<br/>warning in the browser console (concerning efficiency)<br/>solution: <strong>key</strong> (as a string):</p>
<pre class="code"><span class="hljs-keyword">let</span> todos = [ { <span class="hljs-attr">title</span>: <span class="hljs-string">'groceries'</span>, <span class="hljs-attr">id</span>: <span class="hljs-number">0</span> }, ... ];

<span class="hljs-keyword">let</span> list = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
  {
    todos.map(todo =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id.toString()}</span>&gt;</span>{todo.title}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    ))
  }
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span></pre></section><section class="slide" id="slide-9-11"><h2>JSX: if / else</h2>
<pre class="code">&lt;div&gt;{<span class="hljs-built_in">Math</span>.random() &gt; <span class="hljs-number">0.5</span> ? <span class="hljs-string">'heads'</span> : <span class="hljs-string">'tails'</span>}&lt;<span class="hljs-regexp">/div&gt;</span></pre></section><section class="slide" id="slide-9-12"><h2>JSX: if / else</h2>
<p>Task:</p>
</section><section class="slide" id="slide-9-13"><h2>JSX: if / else</h2>
<pre class="code"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cointoss</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.random() &gt; <span class="hljs-number">0.5</span>) {<span class="hljs-keyword">return</span> <span class="hljs-string">'heads'</span>;}
  <span class="hljs-keyword">else</span> {<span class="hljs-keyword">return</span> <span class="hljs-string">'tails'</span>;}
}
[...]
&lt;div&gt;
  {cointoss()}
&lt;<span class="hljs-regexp">/div&gt;</span></pre></section><section class="slide" id="slide-9-14"><h2>JSX: if</h2>
<pre class="code">&lt;div&gt;{<span class="hljs-built_in">Math</span>.random() &gt; <span class="hljs-number">0.5</span> &amp;&amp; <span class="hljs-string">'heads'</span>}&lt;<span class="hljs-regexp">/div&gt;</span></pre></section><section class="slide" id="slide-9-15"><h2>JSX: CSS classes</h2>
<pre class="code">&lt;div className={getClassName()}&gt;[...]&lt;<span class="hljs-regexp">/div&gt;</span></pre></section><section class="slide" id="slide-9-16"><h2>JSX: dynamic style</h2>
<pre class="code">&lt;div
  style={{
    <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>,
    <span class="hljs-attr">fontSize</span>: getFontSize(),
  }}
/&gt;</pre></section><section class="slide" id="slide-9-17"><h2>State</h2>
<p>React components may have an internal <em>state</em></p>
<p>In each component, <code>this.state</code> has a special meaning. Data in <code>this.state</code> may be referenced from the template. This way, the view will automatically update when the data changes.</p>
</section><section class="slide" id="slide-9-18"><h2>structure of this.state</h2>
<ul>
<li><em>this.state</em> is always an object:</li>
</ul>
<pre class="code"><span class="hljs-keyword">constructor</span>() {
  [...]
  <span class="hljs-keyword">this</span>.state = {
    <span class="hljs-attr">loggedIn</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">todos</span>: [<span class="hljs-string">'laundry'</span>, <span class="hljs-string">'groceries'</span>, <span class="hljs-string">'taxes'</span>],
  }
}</pre></section><section class="slide" id="slide-9-19"><h2>modifying this.state</h2>
<p>only via <code>setState()</code>:</p>
<pre class="code"><span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">loggedIn</span>: <span class="hljs-literal">false</span> });
<span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">todos</span>: [<span class="hljs-string">'learn react'</span>] });</pre><p><code>setState</code> will change all specified entries</p>
</section><section class="slide" id="slide-9-20"><h2>modifying this.state</h2>
<p>if the new state depends on the old:</p>
<pre class="code"><span class="hljs-comment">// removing a todo</span>
<span class="hljs-keyword">this</span>.setState(<span class="hljs-function"><span class="hljs-params">oldState</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> newTodos = oldState.todos.slice();
  newTodos.pop();
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">todos</span>: newTodos };
});</pre><p>We pass a callback function to <code>setState</code>. This callback function will transform the old state into the new state.</p>
</section><section class="slide" id="slide-9-21"><h2>Examples</h2>
<ul>
<li>Counter</li>
<li>Clock</li>
<li>Countdown</li>
<li>Diashow</li>
</ul>
</section><section class="slide" id="slide-9-22"><h2>Inputs</h2>
<p>In the context of React, input elements are special:</p>
<p>Their properties (especially <code>.value</code>) can be directly modified by the user<br/>Therefore there are aspects of the UI state which would not be captured in <code>this.state</code>.</p>
</section><section class="slide" id="slide-9-23"><h2>Inputs</h2>
<p>This is how we can capture changes and track them in the state:</p>
<pre class="code">&lt;input
  value={<span class="hljs-keyword">this</span>.state.inputText}
  onChange={<span class="hljs-keyword">this</span>.handleChange}
/&gt;;

handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">inputText</span>: event.target.value });
};</pre></section></section><section class="section" id="section-10"><section class="slide" id="slide-10-1"><h1>Development tools for React</h1>
</section><section class="slide" id="slide-10-2"><h2>React Developer Tools</h2>
<p><a href="https://github.com/facebook/react-devtools">https://github.com/facebook/react-devtools</a></p>
<ul>
<li>display component tags in an inspector</li>
<li>show state and props</li>
<li>highlight changes to state and props</li>
<li>highlight updates / rerenderings of components</li>
</ul>
</section></section><section class="section" id="section-11"><section class="slide" id="slide-11-1"><h1>components</h1>
</section><section class="slide" id="slide-11-2"><h2>components</h2>
<p>Components = custom tags, e.g.</p>
<pre class="code"><span class="hljs-tag">&lt;<span class="hljs-name">Rating</span> <span class="hljs-attr">stars</span>=<span class="hljs-string">{4}/</span>&gt;</span></pre><p><img src="../../images/rating.png" alt="Image: Screenshot of a rating component with stars"/></p>
</section><section class="slide" id="slide-11-3"><h2>components</h2>
<p>In order to distinguish them from ordinary tags, components start with a capital letter</p>
</section><section class="slide" id="slide-11-4"><h2>components: state &amp; props</h2>
<ul>
<li>state = internal to the component</li>
<li>props = parameters that are passed down from the parent</li>
</ul>
</section><section class="slide" id="slide-11-5"><h2>component definition</h2>
<ul>
<li>class components</li>
<li>functional components</li>
</ul>
</section><section class="slide" id="slide-11-6"><h2>class components</h2>
<p>example:</p>
<pre class="code"><span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rating</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"rating"</span>&gt;</span>
        {'*'.repeat(this.props.stars)}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
}</pre></section><section class="slide" id="slide-11-7"><h2>functional components</h2>
<p>example:</p>
<pre class="code"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Rating</span>(<span class="hljs-params">props</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"rating"</span>&gt;</span>{'*'.repeat(props.stars)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}</pre></section><section class="slide" id="slide-11-8"><h2>functional components</h2>
<p>functional components cannot have an internal <em>state</em></p>
</section><section class="slide" id="slide-11-9"><h2>data/event flow</h2>
<ul>
<li>parent → child: props</li>
<li>child → parent: events</li>
</ul>
</section><section class="slide" id="slide-11-10"><h2>Lifecycle-Hooks</h2>
<p>With class components it&#39;s possible to listen for events in their lifecycle:</p>
<ul>
<li><code>componentDidMount()</code></li>
<li><code>componentDidUpdate()</code></li>
<li><code>componentWillUnmount()</code></li>
</ul>
<p>these can be implemented as methods of the component class</p>
</section><section class="slide" id="slide-11-11"><h2>Exercise</h2>
<p>Clock-component (with <code>componentDidMount</code> and <code>componentWillUnmount</code>)</p>
</section><section class="slide" id="slide-11-12"><h2>custom events</h2>
<p>examples:</p>
<ul>
<li>Rating-component with clickable stars</li>
<li>NumberInput-component that lets the user specify an integer with + and - buttons<ul>
<li>bonus: make the API compatible with that of ordinary input-Elements so input-Elements may be easily replaced by NumberInput-components</li>
<li>bonus: add a min / max property that can be specified</li>
</ul>
</li>
</ul>
</section></section><section class="section" id="section-12"><section class="slide" id="slide-12-1"><h1>Exercise: todo list</h1>
</section></section><section class="section" id="section-13"><section class="slide" id="slide-13-1"><h1>TypeScript</h1>
</section><section class="slide" id="slide-13-2"><h2>TypeScript</h2>
<p>= superset of JavaScript with extensions:</p>
<ul>
<li><strong>static typing</strong></li>
<li>public / private properties</li>
<li>decorators</li>
</ul>
</section><section class="slide" id="slide-13-3"><h2>static typing</h2>
<p>data types may be specified in order to support the development environment:</p>
<ul>
<li>auto completion</li>
<li>errors when types mismatch</li>
</ul>
</section><section class="slide" id="slide-13-4"><h2>static typing</h2>
<p>when building: TypeScript is translated to JavaScript, all type information is discarded</p>
</section><section class="slide" id="slide-13-5"><h2>type system: variables</h2>
<pre class="code"><span class="hljs-keyword">let</span> age: <span class="hljs-built_in">number</span> = <span class="hljs-number">32</span>;
<span class="hljs-keyword">let</span> name: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Andreas'</span>;</pre></section><section class="slide" id="slide-13-6"><h2>type system: functions</h2>
<pre class="code"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repeatString</span>(<span class="hljs-params">
    text: <span class="hljs-built_in">string</span>,
    times: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">return</span> ...;
}</pre></section><section class="slide" id="slide-13-7"><h2>type system: arrow functions</h2>
<pre class="code"><span class="hljs-keyword">const</span> repeatString: (
  text: <span class="hljs-built_in">string</span>,
  times: <span class="hljs-built_in">number</span>
) =&gt; <span class="hljs-built_in">string</span> = <span class="hljs-function">(<span class="hljs-params">text, times</span>) =&gt;</span> (...);</pre></section><section class="slide" id="slide-13-8"><h2>type system: arrays</h2>
<pre class="code"><span class="hljs-keyword">let</span> names: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'Anna'</span>, <span class="hljs-string">'Bernhard'</span>, <span class="hljs-string">'Caro'</span>];

<span class="hljs-comment">// alternative syntax</span>

<span class="hljs-keyword">let</span> names: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'Anna'</span>, <span class="hljs-string">'Bernhard'</span>];</pre></section><section class="slide" id="slide-13-9"><h2>type system: tuples</h2>
<p>Arrays with a predefined length and a type for every entry</p>
<pre class="code"><span class="hljs-keyword">let</span> todo: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">boolean</span>];</pre></section><section class="slide" id="slide-13-10"><h2>type system: objects and properties</h2>
<p>objects that have specific properties:</p>
<pre class="code"><span class="hljs-keyword">let</span> p: { name: <span class="hljs-built_in">string</span>; age: <span class="hljs-built_in">number</span> } = getPerson();</pre></section><section class="slide" id="slide-13-11"><h2>type system: object interfaces</h2>
<pre class="code"><span class="hljs-keyword">interface</span> IPerson {
  name: <span class="hljs-built_in">string</span>;
  nickname?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// optional</span>
  birthYear: <span class="hljs-built_in">number</span>;
  <span class="hljs-comment">// Method which takes a number as a parameter</span>
  <span class="hljs-comment">// and returns a number</span>
  getAge: <span class="hljs-function">(<span class="hljs-params">currentYear: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">let</span> p: IPerson = getPerson();</pre></section><section class="slide" id="slide-13-12"><h2>type system: classes and interfaces</h2>
<pre class="code"><span class="hljs-keyword">class</span> User <span class="hljs-keyword">implements</span> IPerson {
  ...
}</pre></section><section class="slide" id="slide-13-13"><h2>type system: void</h2>
<p>Void: can either be <em>undefined</em> or <em>null</em> - is often used with functions that don&#39;t return anything</p>
<pre class="code"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">warnUser</span>(<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>{
  alert(<span class="hljs-string">'warning!'</span>);
}</pre></section><section class="slide" id="slide-13-14"><h2>type system: any</h2>
<p>Any: variable can be of any type - disables the typechecker for this variable</p>
<pre class="code"><span class="hljs-keyword">let</span> ib: <span class="hljs-built_in">any</span> = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'myinput'</span>);
<span class="hljs-built_in">console</span>.log(ib.value);</pre></section><section class="slide" id="slide-13-15"><h2>type system: type assertions</h2>
<pre class="code"><span class="hljs-keyword">let</span> someValue: <span class="hljs-built_in">any</span> = <span class="hljs-string">'this is a string'</span>;

<span class="hljs-keyword">let</span> strLength: <span class="hljs-built_in">number</span> = (someValue <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>).length;</pre></section><section class="slide" id="slide-13-16"><h2>type system: union types</h2>
<pre class="code"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">arg: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) </span>{...}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">arg: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span></span>) </span>{...}</pre></section><section class="slide" id="slide-13-17"><h2>type system: generics</h2>
<pre class="code"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">thrice</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">element: T</span>): <span class="hljs-title">T</span>[] </span>{
  <span class="hljs-keyword">return</span> [element, element, element];
}</pre></section><section class="slide" id="slide-13-18"><h2>private &amp; public properties</h2>
<pre class="code"><span class="hljs-keyword">class</span> Clock {
  <span class="hljs-keyword">private</span> formatTime(time) {
    <span class="hljs-keyword">return</span> ...
  }
  <span class="hljs-keyword">public</span> start() {
    ...
  }
}</pre></section></section><section class="section" id="section-14"><section class="slide" id="slide-14-1"><h1>React with TypeScript</h1>
</section><section class="slide" id="slide-14-2"><h2>create-react-app with TypeScript</h2>
<pre class="code">npx create-react-app my-app --typescript</pre></section><section class="slide" id="slide-14-3"><h2>installing requirements</h2>
<pre class="code">npm install redux react-redux @types/react-redux redux-thunk</pre></section><section class="slide" id="slide-14-4"><h2>components</h2>
<pre class="code">// TodoList.tsx
interface ITodoItemProps {
  todo: ITodo;
  onToggle: (id: int) => void;
}
interface ITodoItemState {}</pre><pre class="code">class TodoItem extends React.PureComponent<
  ITodoItemProps,
  ITodoItemState
> {}</pre></section><section class="slide" id="slide-14-5"><h2>events</h2>
<p>types:</p>
<ul>
<li><code>React.FormEvent</code></li>
<li><code>React.FormEvent&lt;HTMLFormElement&gt;</code></li>
<li><code>React.ChangeEvent&lt;HTMLInputElement&gt;</code></li>
<li><code>React.MouseEvent&lt;HTMLDivElement&gt;</code></li>
</ul>
</section></section><section class="section" id="section-15"><section class="slide" id="slide-15-1"><h1>Material-UI</h1>
<p>Predefined React components conforming to material design style (style of Google/Android)</p>
</section><section class="slide" id="slide-15-2"><h2>Material-UI: Installation and Usage</h2>
<p><a href="https://material-ui.com">https://material-ui.com</a></p>
<p>see info boxes on <em>Installation</em> und <em>Usage</em></p>
</section><section class="slide" id="slide-15-3"><h2>Exercises</h2>
<ul>
<li>Button</li>
<li>Todo-App in Material Style</li>
</ul>
</section></section>

    </div>
    <div id="navigation-arrows">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="navigation-arrows-svg"
        xml:space="preserve" width="100%" height="100%" viewBox="-110 -110 220 220">
        <path class="arrow right" d="M70,-30L100,0L70,30" />
        <path class="arrow down" d="M-30,70L0,100L30,70" />
        <path class="arrow left" d="M-70,-30L-100,0L-70,30" />
        <path class="arrow up" d="M-30,-70L0,-100L30,-70" />
      </svg>
    </div>
  </div>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgb(150, 150, 150);
      font-family: sans-serif;
    }

    ul {
      padding-left: 1.5rem;
    }

    h1 {
      text-align: center;
      font-size: 2rem;
    }

    .slide.inactive {
      display: none;
    }

    #canvas {
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.3);
      background-color: #f8f8f8;
      position: relative;
      display: flex;
    }

    #canvas-content {
      width: 100%;
      height: 100%;
    }

    #canvas-content .note {
      display: none;
    }

    #canvas-content img {
      margin: 0px auto;
      display: block;
    }

    @media (min-aspect-ratio: 8/5) {

      html {
        font-size: 3.5vh;
      }

      /* wide screen */
      #canvas {
        width: calc(100vh / 5 * 8);
        height: 100vh;
        padding: 5vh;
      }
    }

    @media (max-aspect-ratio: 8/5) {

      html {
        font-size: calc(3.5vw * 5 / 8);
      }

      /* narrow screen */
      #canvas {
        width: 100vw;
        height: calc(100vw * 5 / 8);
        padding: calc(5vh * 5 / 8);
      }
    }

    pre.code {
      background-color: rgb(224, 233, 240);
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.3);
      padding: 1em;
    }

    #navigation-arrows {
      position: absolute;
      right: 2rem;
      bottom: 2rem;
      height: 3rem;
      width: 3rem;
    }

    .arrow {
      stroke: lightblue;
      /*stroke-width: 0.8em; Chrome behaves differently with ems here */
      stroke-width: 16px;
      stroke-linecap: round;
      fill: none;
      cursor: pointer;
    }

    td,
    th {
      padding: 0.2em 0.8em;
    }

    th {
      text-align: start;
    }
  </style>
  <script>
    let presenterWindow;
    let activeSlide;
    let slideCount;

    const arrowUp = document.querySelector('.arrow.up');
    const arrowDown = document.querySelector('.arrow.down');
    const arrowRight = document.querySelector('.arrow.right');
    const arrowLeft = document.querySelector('.arrow.left');
    arrowUp.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] - 1);}
    );
    arrowDown.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] + 1);}
    );
    arrowLeft.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] - 1, 1);}
    );
    arrowRight.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] + 1, 1);}
    )
    const init = () => {
      slideCount = countSlides();
      activateSlideSafe(1, 1);
    }

    // count slides
    const countSlides = () => {
      const counts = [];
      return [...document.querySelectorAll('.section')].map(section => section.childNodes.length);
    }

    const updateVisible = () => {
      for (let slide of document.querySelectorAll('.slide')) {
        if (slide.id === `slide-${activeSlide[0]}-${activeSlide[1]}`) {
          slide.className = 'slide active';
        } else {
          slide.className = 'slide inactive';
        }
      }
    }

    const updatePageArrows = () => {
      if (slideCount.length === 1) {
        arrowLeft.style.opacity = "0";
        arrowRight.style.opacity = "0";
      } else {
        const progressSections = (activeSlide[0] - 1) / (slideCount.length - 1);
        arrowLeft.style.opacity = progressSections.toString();
        arrowRight.style.opacity = (1 - progressSections).toString();
      }
      const slidesInActiveSection = slideCount[activeSlide[0] - 1]
      if (slidesInActiveSection === 1) {
        arrowUp.style.opacity = "0";
        arrowDown.style.opacity = "0";
      } else {
        const progressSlides = (activeSlide[1] - 1) / (slidesInActiveSection - 1);
        arrowUp.style.opacity = progressSlides.toString();
        arrowDown.style.opacity = (1 - progressSlides).toString();
      }
    }

    /**
     * Activate a slide if it exists, else do nothing
    */
    const activateSlideSafe = (sectionIndex, slideIndex) => {
      if (1 <= sectionIndex && sectionIndex <= slideCount.length && 1 <= slideIndex && slideIndex <= slideCount[sectionIndex - 1]) {
        activeSlide = [sectionIndex, slideIndex];
        updateVisible();
        updatePageArrows();
        scrolltoActiveSlide();
      }
    }

    const activateNextSlide = () => {
      console.log(activeSlide);
      console.log(slideCount)
      if (activeSlide[1] === slideCount[activeSlide[0] - 1]) {
        console.log('right')
        activateSlideSafe(activeSlide[0] + 1, 1);
      } else {
        console.log('down')
        activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
      }
    }

    const scrolltoActiveSlide = () => {
      const slideId = `#slide-${activeSlide[0]}-${activeSlide[1]}`;
      if (presenterWindow) {
        const activeSlide = presenterWindow.document.querySelector(slideId);
        if (activeSlide) {
          activeSlide.scrollIntoView();
        }
      }
    }

    document.querySelector('body').addEventListener('keydown', event => {
      if (event.key === 'p') {
        const canvasContent = document.querySelector('#canvas-content').innerHTML;
        presenterWindow = window.open(document.URL, '_blank');
        presenterWindow.onload = () => {
          presenterWindow.document.querySelector('body').innerHTML = canvasContent;
        }
      }
      if (event.key === 'ArrowRight') {
        activateSlideSafe(activeSlide[0] + 1, 1);
      } else if (event.key === 'ArrowLeft') {
        activateSlideSafe(activeSlide[0] - 1, 1);
      } else if (event.key === 'ArrowDown') {
        activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
      } else if (event.key === 'ArrowUp') {
        activateSlideSafe(activeSlide[0], activeSlide[1] - 1);
      } else if (event.key === 'Enter') {
        activateNextSlide();
      } else {
        console.log(event.key)
      }
    });

    init();

  </script>
</body>

</html>