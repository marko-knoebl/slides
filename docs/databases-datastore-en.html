<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Databases and data store</title>
  <style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0;
}


/* Base color: saturation 0; */

.hljs,
.hljs-subst {
  color: #444;
}

.hljs-comment {
  color: #888888;
}

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold;
}


/* User color: hue: 0 */

.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000;
}

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold;
}

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060;
}


/* Language color: hue: 90; */

.hljs-literal {
  color: #78A960;
}

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300;
}


/* Meta color: hue: 200 */

.hljs-meta {
  color: #1f7199;
}

.hljs-meta-string {
  color: #4d99bf;
}


/* Misc effects */

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
</head>

<body>
  <div id="canvas">
    <div id="canvas-content">

      <section class="section" id="section-1"><section class="slide" id="slide-1-1">
        <h1 id="title">Databases and data store</h1>

      </section><section class="slide" id="slide-1-2">
        <h2 id="presentation-and-code">Presentation and code</h2>
<p>Presentations available at: <a href="https://karuga.eu/courses-presentations">https://karuga.eu/courses-presentations</a></p>
<p>Code available at: <a href="https://github.com/marko-knoebl/courses-code">https://github.com/marko-knoebl/courses-code</a></p>

      </section><section class="slide" id="slide-1-3">
        <h2 id="your-trainer">Your Trainer</h2>
<p>Marko Knöbl</p>
<ul>
<li>Frontend Web-Development<ul>
<li>JavaScript</li>
<li>React, Angular</li>
</ul>
</li>
<li>Programming<ul>
<li>Python, JavaScript</li>
</ul>
</li>
</ul>

      </section><section class="slide" id="slide-1-4">
        <h2 id="introduction-of-participants">Introduction of Participants</h2>
<ul>
<li>Name</li>
<li>Company</li>
<li>Current Projects</li>
<li>Prior Knowledge</li>
<li>Expectations</li>
</ul>

      </section><section class="slide" id="slide-1-5">
        <h2 id="organizational">Organizational</h2>
<ul>
<li>Duration</li>
<li>Breaks</li>
<li>Materials</li>
<li>Questions, Feedback?</li>
</ul>

      </section></section><section class="section" id="section-2"><section class="slide" id="slide-2-1">
        <h1 id="agenda">Agenda</h1>
<ul>
<li>data formats</li>
<li>databases</li>
<li>SQL query language</li>
</ul>

      </section></section><section class="section" id="section-3"><section class="slide" id="slide-3-1">
        <h1 id="data-formats">Data formats</h1>

      </section><section class="slide" id="slide-3-2">
        <h2 id="data-formats">Data formats</h2>
<p>Important formats for saving / exchanging data:</p>
<ul>
<li>CSV (comma-separated values, text-based tabular documents)</li>
<li>JSON (JavaScript Object Notation)</li>
<li>XML (Extensible Markup Language, similar to HTML)</li>
<li>SQL databases</li>
<li>other databases</li>
</ul>

      </section></section><section class="section" id="section-4"><section class="slide" id="slide-4-1">
        <h1 id="data-types">Data types</h1>

      </section><section class="slide" id="slide-4-2">
        <h2 id="data-types">Data types</h2>
<p>Data types and data structures that are important in IT:</p>
<ul>
<li>numbers (integers and non-integers)</li>
<li>yes/no values</li>
<li>text</li>
<li>binary data (sequences of 0 and 1 that can represent arbitrary information - e.g. images, video, text, ...)</li>
<li>time and date</li>
<li>sequences of other data (e.g. a sequence of numbers)</li>
<li>associative arrays (key-value mappings)</li>
<li>missing data - often represented as <em>null</em></li>
</ul>

      </section><section class="slide" id="slide-4-3">
        <h2 id="example-online-data-sources">Example online data sources</h2>
<ul>
<li>DataHub: <a href="https://datahub.io/core">Core Data</a></li>
<li>OpenWeatherMap: <a href="https://samples.openweathermap.org/data/2.5/weather?q=Berlin&amp;appid=b6907d289e10d714a6e88b30761fae22">example data (not live)</a></li>
</ul>

      </section></section><section class="section" id="section-5"><section class="slide" id="slide-5-1">
        <h1 id="numbers">Numbers</h1>

      </section><section class="slide" id="slide-5-2">
        <h2 id="numbers">Numbers</h2>
<p>types of numbers:</p>
<ul>
<li><em>integer</em></li>
<li><em>floating-point number</em> or <em>float</em> (binary system)</li>
<li><em>decimal</em></li>
</ul>

      </section><section class="slide" id="slide-5-3">
        <h2 id="numbers">Numbers</h2>
<p>Programming languages commonly use <em>integers</em> and <em>floats</em></p>
<p>Databases and some data formats additionally use <em>decimals</em></p>

      </section><section class="slide" id="slide-5-4">
        <h2 id="numbers">Numbers</h2>
<p>Be cautious of rounding errors: Some numbers cannot be represented as floating point numbers - the will always be rounded</p>
<p>e.g.: <code>1/3</code></p>
<p>A computer is also unable to represent numbers like <code>0.1</code> or <code>0.2</code> exactly</p>
<p>Example: <code>0.3 - 0.2</code> will often not evaluate to <code>0.1</code>, but <code>0.09999999999999998</code></p>

      </section><section class="slide" id="slide-5-5">
        <h2 id="numbers">Numbers</h2>
<p>Types like <em>integer</em> or <em>float</em> usually have a specific accuracy</p>
<p>examples:</p>
<ul>
<li>an <em>integer</em> in <em>SQL</em> can typically represent the values <em>-2,147,483,648</em> to <em>2,147,483,647</em></li>
<li>a binary floating point number often has an accuracy of about 15 decimal places (<em>64-Bit numbers</em>)</li>
</ul>

      </section><section class="slide" id="slide-5-6">
        <h2 id="numbers">Numbers</h2>
<p>Saving as a number or as text?</p>
<p>How should we store credit card numbers, ZIP codes, telephone numbers, ...</p>

      </section><section class="slide" id="slide-5-7">
        <h2 id="numbers">Numbers</h2>
<p>Credit card numbers, ZIP codes, telephone numbers should be stored as text</p>
<p>reasons:</p>
<ul>
<li>these numbers can start with zeros</li>
<li>these numbers can include special characters (e.g. <code>/</code>, spaces)</li>
</ul>
<p>Principle: if a number cannot be sensibly used for coputations it should be stored as text</p>

      </section></section><section class="section" id="section-6"><section class="slide" id="slide-6-1">
        <h1 id="boolean-values">Boolean values</h1>

      </section><section class="slide" id="slide-6-2">
        <h2 id="boolean-values">Boolean values</h2>
<p>Boolean value = value representing yes/no or true/false</p>
<p>Boolean values can be represented via a separate data type or via the values <code>1</code> and <code>0</code></p>
<p>Are usually named <code>true</code> and <code>false</code></p>

      </section></section><section class="section" id="section-7"><section class="slide" id="slide-7-1">
        <h1 id="strings">Strings</h1>

      </section><section class="slide" id="slide-7-2">
        <h2 id="strings">Strings</h2>
<p>A <em>string</em> represents text</p>
<p>Today strings can <em>mostly</em> include all Unicode characters; in some cases the character set will be limited, e.g. to <em>ASCII</em></p>

      </section><section class="slide" id="slide-7-3">
        <h2 id="strings">Strings</h2>
<p>Strings are usually delimited by single or double quotes</p>
<p>Valid string literal in Python, JavaScript, JSON:</p>
<pre><code class="language-txt">&quot;Hello, world!&quot;</code></pre>
<p>String in Python, JavaScript, SQL:</p>
<pre><code class="language-txt">&#39;Hello, world!&#39;</code></pre>

      </section><section class="slide" id="slide-7-4">
        <h2 id="strings---escape-sequences">Strings - escape sequences</h2>
<p>Problem: how do we write characters like <code>&quot;</code> inside of a string?</p>
<p>invalid:</p>
<pre><code class="language-py"><span class="hljs-string">"He said: "</span>hi!<span class="hljs-string">""</span></code></pre>

      </section><section class="slide" id="slide-7-5">
        <h2 id="strings---escape-sequences">Strings - escape sequences</h2>
<p>Solution in Python, JavaScript, JSON:</p>
<pre><code class="language-JSON"><span class="hljs-string">"He said: \"hi!\""</span></code></pre>
<p>The character sequence <code>\&quot;</code> is treated like a single quotation mark</p>
<p>Solution in CSV (and similarly in SQL):</p>
<pre><code>&quot;He said: &quot;&quot;hi!&quot;&quot;&quot;</code></pre><p>The character sequence <code>&quot;&quot;</code> is treated like a single quotation mark</p>

      </section><section class="slide" id="slide-7-6">
        <h2 id="strings---escape-sequences">Strings - escape sequences</h2>
<p>More escape sequences in programming languages:</p>
<p>Including a line break in a line (Linux, Mac):</p>
<pre><code class="language-json"><span class="hljs-string">"line 1\nline 2"</span></code></pre>
<p>Including a line break in a line (Windows):</p>
<pre><code class="language-json"><span class="hljs-string">"line 1\r\nline 2"</span></code></pre>
<p>Including a single backslash:</p>
<pre><code class="language-json"><span class="hljs-string">"C:\\programs\\firefox"</span></code></pre>

      </section></section><section class="section" id="section-8"><section class="slide" id="slide-8-1">
        <h1 id="null">null</h1>

      </section><section class="slide" id="slide-8-2">
        <h2 id="null">null</h2>
<p>The special value <code>null</code> commonly represents missing / unknown data</p>

      </section></section><section class="section" id="section-9"><section class="slide" id="slide-9-1">
        <h1 id="csv">CSV</h1>

      </section><section class="slide" id="slide-9-2">
        <h2 id="csv">CSV</h2>
<p>CSV is a file format which can hold tabular data</p>

      </section><section class="slide" id="slide-9-3">
        <h2 id="example">Example</h2>
<pre><code class="language-csv">ISO,Country,Capital,Languages
AD,Andorra,Andorra la Vella,&quot;ES,FR&quot;
AE,United Arab Emirates,Abu Dhabi,&quot;AE,fa,en,hi,ur&quot;
AF,Afghanistan,Kabul,&quot;AF,tk&quot;</code></pre>

      </section><section class="slide" id="slide-9-4">
        <h2 id="standardization">Standardization</h2>
<p>There is no official definitive standard</p>
<p>CSV formats can vary based on:</p>
<ul>
<li>separation character: could be a comma, semicolon, tab</li>
<li>presence of table header</li>
<li>rules for quoting and escaping values</li>
</ul>

      </section><section class="slide" id="slide-9-5">
        <h2 id="standardization">Standardization</h2>
<p>The format is older than the standards - in practice the format varies widely</p>
<ul>
<li>RFC 4180: <a href="https://tools.ietf.org/html/rfc4180">https://tools.ietf.org/html/rfc4180</a></li>
<li>W3C: <a href="https://www.w3.org/TR/2015/REC-tabular-data-model-20151217/">https://www.w3.org/TR/2015/REC-tabular-data-model-20151217/</a><ul>
<li>includes <em>Best Practice CSV</em></li>
</ul>
</li>
</ul>

      </section><section class="slide" id="slide-9-6">
        <h2 id="standardization">Standardization</h2>
<ul>
<li>First line <em>can</em> (RFC) / <em>should</em> (W3C) be a comma-separated list of column names</li>
<li>Lines <em>must</em> (RFC) / <em>should</em> (W3C) be separated by CRLF (carriage return &amp; line feed)</li>
<li>Fields may be enclosed in double quotes; this is necessary if a field contains a comma, a double quote or a line break</li>
<li>If a double quote (<code>&quot;</code>) appears within a field, it must be escaped by doubling it (<code>&quot;&quot;</code>)</li>
</ul>

      </section><section class="slide" id="slide-9-7">
        <h2 id="tsv">TSV</h2>
<p>Derived from CSV: <em>tab-separated values</em></p>
<p>Advantages: easier to read, commas don&#39;t have to be escaped</p>
<p>Disadvantages: not standardized, not as popular</p>
<pre><code class="language-tsv">ISO    Country    Capital    Languages
AD    Andorra    Andorra la Vella    ES,FR
AE    United Arab Emirates    Abu Dhabi    AE,fa,en,hi,ur
AF    Afghanistan    Kabul    AF,tk</code></pre>

      </section><section class="slide" id="slide-9-8">
        <h2 id="exercise">Exercise</h2>
<p>Create a simple CSV file in VS Code and view it in tabular view (icon <em>open in preview</em> in the top right corner)</p>

      </section></section><section class="section" id="section-10"><section class="slide" id="slide-10-1">
        <h1 id="json">JSON</h1>

      </section><section class="slide" id="slide-10-2">
        <h2 id="json">JSON</h2>
<p>JSON = <em>JavaScript Object Notation</em>: File format which is especially relevant in web development.</p>

      </section><section class="slide" id="slide-10-3">
        <h2 id="data-types">Data types</h2>
<ul>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
<li>Null</li>
<li>Array</li>
<li>Object</li>
</ul>

      </section><section class="slide" id="slide-10-4">
        <h2 id="null">Null</h2>
<p>The expression <code>null</code> symbolizes the absence of a value</p>
<pre><code class="language-json">null</code></pre>

      </section><section class="slide" id="slide-10-5">
        <h2 id="string">String</h2>
<p>Strings are delimited by double quotes</p>
<p>(In JavaScript single quotes would be allowed as well)</p>

      </section><section class="slide" id="slide-10-6">
        <h2 id="array">Array</h2>
<p>An <em>array</em> contains a sequence of other objects</p>
<pre><code class="language-json">[<span class="hljs-string">"Anne"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Chris"</span>]</code></pre>
<pre><code class="language-json">[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>]</code></pre>

      </section><section class="slide" id="slide-10-7">
        <h2 id="object">Object</h2>
<p>An <em>object</em> contains named entries</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Thomas"</span>,
  <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Edison"</span>,
  <span class="hljs-attr">"birthYear"</span>: <span class="hljs-number">1847</span>,
  <span class="hljs-attr">"living"</span>: <span class="hljs-literal">false</span>
}</code></pre>
<p>(In JavaScript the names of entries can be stated without quotes, e.g. <code>firstName</code>)</p>

      </section></section><section class="section" id="section-11"><section class="slide" id="slide-11-1">
        <h1 id="xml">XML</h1>

      </section><section class="slide" id="slide-11-2">
        <h2 id="xml">XML</h2>
<p>XML = Extensible Markup Language</p>
<p>Language that is similar to HTML</p>
<p>Was a default language for data exchange; is being replaced more and more by JSON</p>

      </section><section class="slide" id="slide-11-3">
        <h2 id="xml">XML</h2>
<p>example:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">person</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Adam<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">age</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"years"</span>&gt;</span>40<span class="hljs-tag">&lt;/<span class="hljs-name">age</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">person</span>&gt;</span></code></pre>

      </section></section><section class="section" id="section-12"><section class="slide" id="slide-12-1">
        <h1 id="databases">Databases</h1>

      </section><section class="slide" id="slide-12-2">
        <h2 id="databases">Databases</h2>
<p>use: managing big amounts of data</p>

      </section><section class="slide" id="slide-12-3">
        <h2 id="tables-and-schemas">Tables and schemas</h2>
<p>most databases store their data in tables</p>

      </section><section class="slide" id="slide-12-4">
        <h2 id="relations-between-tables">Relations between tables</h2>
<ul>
<li><code>1 : 1</code></li>
<li><code>1 : n</code></li>
<li><code>m : n</code></li>
</ul>

      </section><section class="slide" id="slide-12-5">
        <h2 id="relations-between-tables-examples">Relations between tables: examples</h2>
<ul>
<li><code>0..1 : 1..1</code><br>department ←manages→ person</li>
<li><code>0..1 : 0..n</code><br>department ←works in→ person</li>
<li><code>0..m : 0..n</code><br>project ←works on→ person</li>
</ul>

      </section><section class="slide" id="slide-12-6">
        <h2 id="entity-relationship-model">Entity-relationship model</h2>
<p><a href="https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model">https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model</a></p>

      </section></section><section class="section" id="section-13"><section class="slide" id="slide-13-1">
        <h1 id="sql-basics">SQL Basics</h1>

      </section><section class="slide" id="slide-13-2">
        <h2 id="sql">SQL</h2>
<p>SQL = Structured Query Language</p>
<p>Standardized query language for tabular data</p>

      </section><section class="slide" id="slide-13-3">
        <h2 id="sql-standardization">SQL standardization</h2>
<p>The standard is newer than most implementations</p>
<p>Standardized by <em>ANSI</em> and <em>ISO</em></p>
<p>Old drafts of the standard (free):</p>
<ul>
<li><a href="http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt">SQL 1992 draft (txt, 1.5 MB)</a></li>
<li><a href="www.wiscorp.com/sql20nn.zip">SQL 2011 draft (zip of PDFs, 13 MB)</a></li>
</ul>

      </section><section class="slide" id="slide-13-4">
        <h2 id="sql-implementations">SQL implementations</h2>
<p>open source:</p>
<ul>
<li>MySQL</li>
<li>MariaDB</li>
<li>PostgreSQL</li>
<li>SQLite</li>
</ul>
<p>proprietary:</p>
<ul>
<li>Oracle</li>
<li>SQL Server (Microsoft)</li>
</ul>
<p><a href="https://insights.stackoverflow.com/survey/2019#technology-_-databases">Popularity according to Stackoverflow Developer Survey</a></p>

      </section><section class="slide" id="slide-13-5">
        <h2 id="trying-sql">Trying SQL</h2>
<p><a href="https://db-fiddle.com">https://db-fiddle.com</a> (PostgreSQL, MySQL, SQLite)</p>
<p><a href="https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all">https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all</a> (SQLite)</p>
<p>Desktop application:</p>
<p><a href="https://sqlitebrowser.org/">https://sqlitebrowser.org/</a> (SQLite)</p>

      </section><section class="slide" id="slide-13-6">
        <h2 id="general-sql-syntax">General SQL syntax</h2>
<p>SQL statements are terminated by <code>;</code></p>
<p>Two variants of comments:</p>
<pre><code class="language-sql"><span class="hljs-comment">/* multi-line
comment */</span></code></pre>
<pre><code class="language-sql"><span class="hljs-comment">-- single line comment</span></code></pre>

      </section><section class="slide" id="slide-13-7">
        <h2 id="general-sql-syntax">General SQL syntax</h2>
<p>SQL is motly <em>case insensitive</em></p>
<p>Convention: keywords capitalized, rest lowercase and separated by underscores</p>
<p>example:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> first_name, last_name, tel <span class="hljs-keyword">FROM</span> person;</code></pre>

      </section><section class="slide" id="slide-13-8">
        <h2 id="general-sql-syntax">General SQL syntax</h2>
<p>Table names and column names are converted to uppercase by SQL, e.g. <code>first_name</code> → <code>FIRST_NAME</code>, <code>person</code> → <code>PERSON</code></p>
<p>Exceptions: In <em>PostgreSQL</em> names are converted to lowercase</p>

      </section><section class="slide" id="slide-13-9">
        <h2 id="general-sql-syntax">General SQL syntax</h2>
<p>If names should be used in their exact spelling they need to be quoted; this is rather uncommon</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-string">"First_Name"</span>, <span class="hljs-string">"Last_Name"</span>, <span class="hljs-string">"Tel"</span> <span class="hljs-keyword">FROM</span> <span class="hljs-string">"Person"</span>;</code></pre>
<p>Exception: In <em>MySQL</em> would use backticks (`) in place of quotes; the mode <code>ANSI_QUOTES</code> can be enabled for standards compliant behavior</p>

      </section><section class="slide" id="slide-13-10">
        <h2 id="exercise-data">Exercise data</h2>
<p><a href="https://github.com/datasets">https://github.com/datasets</a></p>

      </section><section class="slide" id="slide-13-11">
        <h2 id="creating-tables">Creating tables</h2>
<p>command: <code>CREATE TABLE</code></p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> person(
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">50</span>),
    tel <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>)
);</code></pre>

      </section><section class="slide" id="slide-13-12">
        <h2 id="sql-data-types">SQL data types</h2>
<p>ISO / ANSI SQL Standard (selection):</p>
<ul>
<li><code>BOOLEAN</code></li>
<li><code>INT</code> / <code>INTEGER</code>, <code>SMALLINT</code>, <code>BIGINT</code></li>
<li><code>NUMERIC</code> / <code>DECIMAL</code></li>
<li><code>REAL</code>, <code>DOUBLE PRECISION</code></li>
<li><code>VARCHAR(n)</code></li>
<li><code>VARBINARY(n)</code></li>
<li><code>DATE</code>, <code>TIME</code>, <code>TIMESTAMP</code></li>
</ul>

      </section><section class="slide" id="slide-13-13">
        <h2 id="inserting-data">Inserting data</h2>
<pre><code class="language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> person (<span class="hljs-keyword">name</span>, tel)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'John Smith'</span>, <span class="hljs-string">'012345'</span>);</code></pre>
<p>short form:</p>
<pre><code class="language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> person
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'John Smith'</span>, <span class="hljs-string">'012345'</span>);</code></pre>

      </section><section class="slide" id="slide-13-14">
        <h2 id="querying-data">Querying data</h2>
<p>Querying data of all persons:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">name</span>, tel <span class="hljs-keyword">FROM</span> person;</code></pre>
<p>or</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> person;</code></pre>

      </section><section class="slide" id="slide-13-15">
        <h2 id="conditional-queries-where">Conditional queries (WHERE)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> tel
<span class="hljs-keyword">FROM</span> person
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Smith'</span>;</code></pre>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> tel
<span class="hljs-keyword">FROM</span> person
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'% Smith'</span>
<span class="hljs-keyword">AND</span> tel <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'+49%'</span>;</code></pre>

      </section><section class="slide" id="slide-13-16">
        <h2 id="modifying-data-update">Modifying data (UPDATE)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">UPDATE</span> person
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Miller'</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Smith'</span>;</code></pre>

      </section><section class="slide" id="slide-13-17">
        <h2 id="deleting-data-delete">Deleting data (DELETE)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> person
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Miller'</span>;</code></pre>

      </section><section class="slide" id="slide-13-18">
        <h2 id="exercise">Exercise</h2>
<p>Create and modify a contact database</p>

      </section></section><section class="section" id="section-14"><section class="slide" id="slide-14-1">
        <h1 id="sql-intermediate">SQL Intermediate</h1>

      </section><section class="slide" id="slide-14-2">
        <h2 id="online-tutorial">Online Tutorial</h2>
<p><a href="https://www.w3schools.com/sql/default.asp">https://www.w3schools.com/sql/default.asp</a></p>

      </section><section class="slide" id="slide-14-3">
        <h2 id="recap-sql-data-types">Recap: SQL data types</h2>
<p>ISO / ANSI SQL Standard (selection):</p>
<ul>
<li><code>BOOLEAN</code></li>
<li><code>INT</code> / <code>INTEGER</code>, <code>SMALLINT</code>, <code>BIGINT</code></li>
<li><code>REAL</code>, <code>DOUBLE PRECISION</code></li>
<li><code>VARCHAR(n)</code></li>
<li><code>VARBINARY(n)</code></li>
<li><code>DATE</code>, <code>TIME</code>, <code>TIMESTAMP</code></li>
</ul>

      </section><section class="slide" id="slide-14-4">
        <h2 id="boolean">Boolean</h2>
<p>Represented by the expressions <code>TRUE</code> and <code>FALSE</code></p>
<p>Deviations from</p>
<p>Deviations from the standard:</p>
<ul>
<li><em>SQL Server</em>: <code>BOOLEAN</code> → <code>BIT</code></li>
<li><em>MySQL</em>, <em>SQLite</em>, <em>Oracle</em>: not supported, alternative could be <code>0</code> and <code>1</code></li>
</ul>

      </section><section class="slide" id="slide-14-5">
        <h2 id="numbers">Numbers</h2>
<ul>
<li><code>SMALLINT</code> (commonly 16 Bit)</li>
<li><code>INT</code> / <code>INTEGER</code> (commonly 32 Bit)</li>
<li><code>BIGINT</code> (commonly 64 Bit)</li>
<li><code>NUMERIC</code> / <code>DECIMAL</code> (decimal numbers with variable accuracy)</li>
<li><code>REAL</code> (commonly 32 Bit)</li>
<li><code>DOUBLE PRECISION</code> (commonly 64 Bit)</li>
</ul>
<p>Deviations from the standard:</p>
<ul>
<li><em>MySQL</em>: <code>REAL</code> → <code>FLOAT</code></li>
<li><em>SQLite</em>: All types are stored with 64 bit accuracy</li>
</ul>

      </section><section class="slide" id="slide-14-6">
        <h2 id="numbers">Numbers</h2>
<p>Decimal number with 10 digits before and 2 digits after the decimal point:</p>
<pre><code class="language-sql">DECIMAL(12, 2)</code></pre>

      </section><section class="slide" id="slide-14-7">
        <h2 id="numbers">Numbers</h2>
<p>MySQL distinguishes between:</p>
<ul>
<li><code>SMALLINT</code> (-32768 to 32767)</li>
<li><code>UNSIGNED SMALLINT</code> (0 to 65535)</li>
</ul>

      </section><section class="slide" id="slide-14-8">
        <h2 id="text">Text</h2>
<ul>
<li><code>VARCHAR(10)</code>: Text of up to 10 characters</li>
</ul>
<p>Usually Unicode is supported</p>
<p>On <em>SQL Server</em>: Use <code>NVARCHAR</code> for Unicode support (needs twice as much space)</p>
<p>On <em>Oracle</em>: use <code>VARCHAR2</code></p>
<p>Maximum length does not affect size on disk (but may affect size in memory)</p>

      </section><section class="slide" id="slide-14-9">
        <h2 id="text">Text</h2>
<p>Text is <em>always</em> delimited by single quotes:</p>
<pre><code class="language-SQL"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">test</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Hello'</span>);</code></pre>
<p>Escaping quotes by doubling:</p>
<pre><code class="language-SQL"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">test</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Let''s go'</span>);</code></pre>

      </section><section class="slide" id="slide-14-10">
        <h2 id="binary-data">Binary data</h2>
<p><code>VARBINARY(n)</code>: Byte sequence with maximum length <em>n</em></p>
<p>Deviations from the standard:</p>
<ul>
<li><em>PostgreSQL</em>: <code>BYTEA</code></li>
<li><em>SQLite</em>: Internally the data type is called <code>BLOB</code>, but <code>VARBINARY</code> is accepted</li>
</ul>

      </section><section class="slide" id="slide-14-11">
        <h2 id="date-time">Date, Time</h2>
<p>Types:</p>
<ul>
<li><code>DATE</code></li>
<li><code>TIME</code></li>
<li><code>TIMESTAMP</code>: date and time</li>
</ul>
<p>examples:</p>
<ul>
<li><code>&#39;2013-02-14&#39;</code> (recommended format)</li>
<li><code>&#39;13:02:17&#39;</code>, <code>&#39;13:02:17.232&#39;</code></li>
<li><code>&#39;2013-02-14 13:02:17&#39;</code>, <code>&#39;2013-02-14T13:02:17&#39;</code></li>
</ul>

      </section><section class="slide" id="slide-14-12">
        <h2 id="date-time">Date, Time</h2>
<p>Deviations from the standard:</p>
<ul>
<li>not supported by <code>SQLite</code></li>
<li><em>SQL Server</em>: <code>TIMESTAMP</code> → <code>DATETIME</code></li>
</ul>
<p>Limitations:</p>
<ul>
<li><em>MySQL</em>: <code>TIMESTAMP</code> is limited to years between 1970 and 2038 - a better alternative would be <code>DATETIME</code></li>
</ul>

      </section><section class="slide" id="slide-14-13">
        <h2 id="resources-on-data-types">Resources on data types</h2>
<ul>
<li><a href="https://sqlite.org/datatype3.html">SQLite data types</a></li>
<li><a href="https://www.postgresql.org/docs/current/datatype.html">PostgreSQL data types</a></li>
<li><a href="https://www.postgresql.org/docs/current/features.html">PostgreSQL SQL Conformance</a></li>
</ul>

      </section><section class="slide" id="slide-14-14">
        <h2 id="example-database-of-chemical-elements">Example: database of chemical elements</h2>
<p>entries:</p>
<ul>
<li><em>atomic_number</em></li>
<li><em>symbol</em></li>
<li><em>name</em></li>
<li><em>atomic_mass</em></li>
</ul>

      </section><section class="slide" id="slide-14-15">
        <h2 id="example-database-of-chemical-elements">Example: database of chemical elements</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>),
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>),
    atomic_mass <span class="hljs-built_in">REAL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-16">
        <h2 id="constraints">Constraints</h2>
<p>Constraining columns:</p>
<ul>
<li><code>NOT NULL</code></li>
<li><code>UNIQUE</code></li>
<li><code>PRIMARY KEY</code></li>
<li>(<code>FOREIGN KEY</code>)</li>
</ul>

      </section><section class="slide" id="slide-14-17">
        <h2 id="not-null">Not null</h2>
<p>Entry may not be left blank</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-18">
        <h2 id="unique">Unique</h2>
<p>Each entry in a column must be unique</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-19">
        <h2 id="primary-key">Primary key</h2>
<p>Enables a unique identification of a row in a table</p>
<ul>
<li>natural key: is &quot;naturally&quot; contained in the data</li>
<li>surrogate key: is added in addition to the data (as an integer)</li>
</ul>
<p>A primary key is always <em>unique</em> and <em>not null</em></p>

      </section><section class="slide" id="slide-14-20">
        <h2 id="primary-key">Primary key</h2>
<p>natural key:</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-21">
        <h2 id="primary-key">Primary key</h2>
<p>surrogate key:</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    atomic_numer <span class="hljs-built_in">INT</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-22">
        <h2 id="auto-increment">Auto increment</h2>
<p>Automatic creation of a numeric primary key starting at 1:</p>
<p>Standard SQL (implemented in PostgreSQL, Oracle):</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>;
    ...
);</code></pre>

      </section><section class="slide" id="slide-14-23">
        <h2 id="auto-increment">Auto increment</h2>
<p>other variants:</p>
<ul>
<li>MySQL: <code>AUTO_INCREMENT</code></li>
<li>SQLite: <code>AUTOINCREMENT</code></li>
<li>PostgreSQL: <code>SERIAL</code></li>
</ul>
<p>SQLite will always automatically generate a unique numeric key under the name <code>rowid</code></p>

      </section><section class="slide" id="slide-14-24">
        <h2 id="indexes-in-databases">Indexes in databases</h2>
<p>In general: ordered lists can be searched much quicker than unordered lists (binary search)</p>
<p>Example: in the phone book we can quickly search for a last name, but not for a first name</p>
<p>Indexes may be added to one or more columns (additional data that references the entries in a specific order)</p>

      </section><section class="slide" id="slide-14-25">
        <h2 id="creating-indexes">Creating indexes</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_name
<span class="hljs-keyword">ON</span> <span class="hljs-keyword">element</span> (<span class="hljs-keyword">name</span>);</code></pre>
<p>Querying for names will now be faster</p>

      </section><section class="slide" id="slide-14-26">
        <h2 id="code-periodic-table">Code: periodic table</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_name
<span class="hljs-keyword">ON</span> <span class="hljs-keyword">element</span> (<span class="hljs-keyword">name</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">element</span>(atomic_number, symbol, <span class="hljs-keyword">name</span>, atomic_mass)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'H'</span>, <span class="hljs-string">'Hydrogen'</span>, <span class="hljs-number">1.008</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">element</span>(atomic_number, symbol, <span class="hljs-keyword">name</span>, atomic_mass)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-string">'He'</span>, <span class="hljs-string">'Helium'</span>, <span class="hljs-number">4.0026</span>);

<span class="hljs-keyword">SELECT</span> *
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">element</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span>=<span class="hljs-string">'Hydrogen'</span>;</code></pre>

      </section></section><section class="section" id="section-15"><section class="slide" id="slide-15-1">
        <h1 id="sql-joins">SQL Joins</h1>

      </section><section class="slide" id="slide-15-2">
        <h2 id="example-music-database">Example: music database</h2>
<p>tables:</p>
<ul>
<li><em>artist</em></li>
<li><em>album</em></li>
<li><em>song</em></li>
</ul>
<p>template: Chinook Musikdatenbank</p>
<p><a href="https://github.com/lerocha/chinook-database">GitHub</a></p>
<p><a href="http://schemaspy.org/sample/index.html">Inspector on SchemaSpy</a></p>

      </section><section class="slide" id="slide-15-3">
        <h2 id="example-music-database---artist">Example: music database - artist</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> artist(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    country <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">5</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    <span class="hljs-keyword">year</span> <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> artist (<span class="hljs-keyword">name</span>, country, <span class="hljs-keyword">year</span>)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'The Beatles'</span>, <span class="hljs-string">'UK'</span>, <span class="hljs-number">1960</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> artist (<span class="hljs-keyword">name</span>, country, <span class="hljs-keyword">year</span>)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'AC/DC'</span>, <span class="hljs-string">'AUS'</span>, <span class="hljs-number">1973</span>);</code></pre>

      </section><section class="slide" id="slide-15-4">
        <h2 id="foreign-key">Foreign key</h2>
<p>Reference to one entry in another table</p>
<p>example: each entry in the table <em>song</em> may reference an entry in the table <em>artist</em> via the column <em>artist_id</em></p>

      </section><section class="slide" id="slide-15-5">
        <h2 id="foreign-key">Foreign key</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> song(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,
    title <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    artist_id <span class="hljs-built_in">INT</span>,
    FOREIGN <span class="hljs-keyword">KEY</span>(artist_id) <span class="hljs-keyword">REFERENCES</span> artist(<span class="hljs-keyword">id</span>)
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> song (title, artist_id)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Let it Be'</span>, <span class="hljs-number">1</span>);</code></pre>

      </section><section class="slide" id="slide-15-6">
        <h2 id="foreign-key">Foreign key</h2>
<p>A foreign key guarantees the existence of a matching entry in the other associated table</p>
<pre><code class="language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> song (title, artist_id)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Wish You Were Here'</span>, <span class="hljs-number">10</span>);</code></pre>
<p>→ error</p>

      </section><section class="slide" id="slide-15-7">
        <h2 id="joining-tables-inner-join">Joining tables (INNER JOIN)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> song.title, artist.name
<span class="hljs-keyword">FROM</span> artist
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> song
<span class="hljs-keyword">ON</span> artist.id=song.artist_id;</code></pre>
<p>The above code lists all combinations where <code>artist.id</code> and <code>song.artist_id</code> match</p>

      </section><section class="slide" id="slide-15-8">
        <h2 id="joining-tables-left-join">Joining tables (LEFT JOIN)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> song.title, artist.name
<span class="hljs-keyword">FROM</span> song
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> artist
<span class="hljs-keyword">ON</span> artist.id=song.artist_id;</code></pre>
<p>The above code lists all combinations and also includes songs that don&#39;t have an artist defined</p>

      </section></section><section class="section" id="section-16"><section class="slide" id="slide-16-1">
        <h1 id="mongodb">MongoDB</h1>

      </section><section class="slide" id="slide-16-2">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>standardized language, independent of the programming language</li>
<li>often used via <em>ORMs</em> (<em>object relational mappings</em>)</li>
</ul>
<p>MongoDB:</p>
<ul>
<li><em>one</em> query syntax per programming language</li>
</ul>

      </section><section class="slide" id="slide-16-3">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>schema is predefined when creating tables</li>
<li>changing the schema (migration) may be complex</li>
</ul>
<p>MongoDB:</p>
<ul>
<li>a <em>document</em> may have an arbitrary structure</li>
<li>a validator <em>may</em> be specified for a collection</li>
</ul>

      </section><section class="slide" id="slide-16-4">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>mostly scales vertically: adding resources to an existing server</li>
</ul>
<p>MongoDB:</p>
<ul>
<li>mostly scales horizontally: adding additional servers (via sharding)</li>
</ul>

      </section><section class="slide" id="slide-16-5">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>mostly uses <em>atomic</em> entries (and first normal form)</li>
</ul>
<p>MongoDB:</p>
<ul>
<li>often includes composite entries (arrays, objects):</li>
</ul>
<pre><code class="language-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"sue"</span>,
  <span class="hljs-attr">"groups"</span>: [<span class="hljs-string">"news"</span>, <span class="hljs-string">"sports"</span>]
}</code></pre>

      </section><section class="slide" id="slide-16-6">
        <h2 id="mongodb">MongoDB</h2>
<p><em>MongoDB</em> is a so-called <em>document oriented</em> database</p>
<p>Its structure may look similar to that of a JSON document</p>

      </section><section class="slide" id="slide-16-7">
        <h2 id="bson-file-format">BSON file format</h2>
<p>MongoDB is based on the BSON file format. It resembles JSON, but it is a binary format and can be read and written more efficiently</p>
<p>Importing and exporting can be done via the programs <code>mongodump</code> und <code>mongorestore</code></p>

      </section></section><section class="section" id="section-17"><section class="slide" id="slide-17-1">
        <h1 id="querying-data">Querying data</h1>

      </section><section class="slide" id="slide-17-2">
        <h2 id="getting-all-data">Getting all data</h2>
<p>SQL:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> iris;</code></pre>
<p>SQLAlchemy (Python):</p>
<pre><code class="language-sql">session.query(Iris)</code></pre>
<p>mongo shell (JS):</p>
<pre><code class="language-js">db.collection(<span class="hljs-string">'iris'</span>).find({});</code></pre>
<p>Pandas (Python): N/A</p>

      </section><section class="slide" id="slide-17-3">
        <h2 id="selecting-only-some-columns--fields">Selecting only some columns / fields</h2>
<p>SQL:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> sepal_length, sepal_width <span class="hljs-keyword">FROM</span> iris;</code></pre>
<p>SQLAlchemy (Python):</p>
<pre><code class="language-sql">session.query(Iris.sepal_length, Iris.sepal_width)</code></pre>

      </section><section class="slide" id="slide-17-4">
        <h2 id="selecting-only-some-columns--fields">Selecting only some columns / fields</h2>
<p>Mongo shell:</p>
<pre><code class="language-js">db.collection(<span class="hljs-string">'iris'</span>).find(
  {},
  { <span class="hljs-attr">sepal_length</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">sepal_width</span>: <span class="hljs-number">1</span> }
);</code></pre>
<p>Pandas:</p>
<pre><code class="language-py">iris_data.loc[:,[<span class="hljs-string">"sepal_length"</span>, <span class="hljs-string">"sepal_width"</span>]]</code></pre>

      </section><section class="slide" id="slide-17-5">
        <h2 id="finding-specific-rows">Finding specific rows</h2>
<p>SQL:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> iris <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span>=<span class="hljs-string">'Iris-setosa'</span>;</code></pre>
<p>SQLAlchemy (Python):</p>
<pre><code class="language-py">session.query(Iris).filter_by(Iris.name=<span class="hljs-string">"Iris-setosa"</span>)</code></pre>

      </section><section class="slide" id="slide-17-6">
        <h2 id="finding-specific-rows">Finding specific rows</h2>
<p>mongo shell:</p>
<pre><code class="language-js">db.collection(<span class="hljs-string">'iris'</span>).find({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Iris-setosa'</span> });</code></pre>
<p>pandas (Python):</p>
<pre><code class="language-py">iris_setosa_data = iris_data.loc[
    iris_data[<span class="hljs-string">"name"</span>] == <span class="hljs-string">"Iris-setosa"</span>
]</code></pre>
<p>pandas (Python): selecting a range of rows:</p>
<pre><code class="language-py">iris_data.iloc[<span class="hljs-number">10</span>:<span class="hljs-number">20</span>]</code></pre>

      </section><section class="slide" id="slide-17-7">
        <h2 id="combination-rows-and-columns">Combination: rows and columns</h2>
<p>SQL:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> sepal_length, sepal_width
<span class="hljs-keyword">FROM</span> iris
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span>=<span class="hljs-string">'Iris-setosa'</span>;</code></pre>

      </section><section class="slide" id="slide-17-8">
        <h2 id="combination-rows-and-columns">Combination: rows and columns</h2>
<p>SQLAlchemy (Python):</p>
<pre><code class="language-py">session.query(
    Iris.sepal_length, Iris.sepal_width
).filter_by(Iris.name=<span class="hljs-string">"Iris-setosa"</span>)</code></pre>

      </section><section class="slide" id="slide-17-9">
        <h2 id="combination-rows-and-columns">Combination: rows and columns</h2>
<p>mongo shell:</p>
<pre><code class="language-js">db.collection(<span class="hljs-string">'iris'</span>).find(
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Iris-setosa'</span> },
  { <span class="hljs-attr">sepal_length</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">sepal_width</span>: <span class="hljs-number">1</span> }
);</code></pre>

      </section><section class="slide" id="slide-17-10">
        <h2 id="combination-rows-and-columns">Combination: rows and columns</h2>
<p>pandas (Python):</p>
<pre><code class="language-py">iris_data.loc[
    [iris_data[<span class="hljs-string">"name"</span>] == <span class="hljs-string">"Iris-setosa"</span>],
    [<span class="hljs-string">"sepal_length"</span>, <span class="hljs-string">"sepal_width"</span>],
]</code></pre>

      </section><section class="slide" id="slide-17-11">
        <h2 id="sorting-data">Sorting data</h2>
<p>SQL:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> sepal_length, sepal_width
<span class="hljs-keyword">FROM</span> iris
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> sepal_length;</code></pre>

      </section><section class="slide" id="slide-17-12">
        <h2 id="sorting-data">Sorting data</h2>
<p>SQLAlchemy:</p>
<pre><code class="language-py">session.query(
    Iris.sepal_length, Iris.sepal_width
).order_by(Iris.sepal_length)</code></pre>

      </section><section class="slide" id="slide-17-13">
        <h2 id="sorting-data">Sorting data</h2>
<p>mongo shell:</p>
<pre><code class="language-js">db.collection(<span class="hljs-string">'iris'</span>)
  .find({}, { <span class="hljs-attr">sepal_length</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">sepal_width</span>: <span class="hljs-number">1</span> })
  .sort({ <span class="hljs-attr">sepal_length</span>: <span class="hljs-number">1</span> });</code></pre>

      </section><section class="slide" id="slide-17-14">
        <h2 id="sorting-data">Sorting data</h2>
<p>pandas (Python):</p>
<pre><code class="language-py">iris_data.loc[[<span class="hljs-string">"sepal_length"</span>, <span class="hljs-string">"sepal_width"</span>]].sort_values(
    by=<span class="hljs-string">"sepal_length"</span>
)</code></pre>

      </section></section>

    </div>
    <div id="navigation-arrows">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="navigation-arrows-svg"
        xml:space="preserve" width="100%" height="100%" viewBox="-110 -110 220 220">
        <path class="arrow right" d="M70,-30L100,0L70,30" />
        <path class="arrow down" d="M-30,70L0,100L30,70" />
        <path class="arrow left" d="M-70,-30L-100,0L-70,30" />
        <path class="arrow up" d="M-30,-70L0,-100L30,-70" />
      </svg>
    </div>
  </div>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgb(150, 150, 150);
      font-family: -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
      line-height: 1.5rem;
    }

    p, ul, pre {
      margin-top: 0;
    }

    ul {
      padding-left: 1.5rem;
    }

    h1, h2, h3 {
      margin-top: 0px;
      font-weight: 600;
    }

    h1 {
      margin-top: 5vh;
      text-align: center;
      font-size: 2rem;
    }

    h2 {
      margin-bottom: 1.5em;
    }

    svg {
      width: 100%;
      height: auto;
    }

    .section {
      height: 100%;
      display: none;
    }

    .section.active {
      display: block;
    }

    .slide {
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .slide.inactive {
      display: none;
    }

    #canvas {
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.3);
      background-color: #f8f8f8;
      position: relative;
      display: flex;
    }

    #canvas-content {
      width: 100%;
      height: 100%;
    }

    #canvas-content .note {
      display: none;
    }

    #canvas-content img {
      margin: 0px auto;
      display: block;
    }

    @media (min-aspect-ratio: 8/5) {

      html {
        font-size: 3.5vh;
      }

      /* wide screen */
      #canvas {
        width: calc(100vh / 5 * 8);
        height: 100vh;
        padding: 10vh;
        padding-top: 5vh;
      }
    }

    @media (max-aspect-ratio: 8/5) {

      html {
        font-size: calc(3.5vw * 5 / 8);
      }

      /* narrow screen */
      #canvas {
        width: 100vw;
        height: calc(100vw * 5 / 8);
        padding: calc(10vh * 5 / 8);
        padding-top: calc(5vh * 5 / 8);
      }
    }

    pre {
      background-color: rgb(224, 233, 240);
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
      padding: 0.5em 1em;
      line-height: 1.2em;
      overflow: auto;
    }

    #navigation-arrows {
      position: absolute;
      right: 2rem;
      top: 2rem;
      height: 3rem;
      width: 3rem;
    }

    #navigation-arrows .arrow {
      stroke: lightblue;
      /*stroke-width: 0.8em; Chrome behaves differently with ems here */
      stroke-width: 16px;
      stroke-linecap: round;
      fill: none;
      cursor: pointer;
    }

    td,
    th {
      padding: 0.2em 0.8em;
    }

    th {
      text-align: start;
    }
  </style>
  <script>
    let presenterWindow;
    let activeSlide;
    let slideCount;

    const arrowUp = document.querySelector('.arrow.up');
    const arrowDown = document.querySelector('.arrow.down');
    const arrowRight = document.querySelector('.arrow.right');
    const arrowLeft = document.querySelector('.arrow.left');
    arrowUp.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] - 1);}
    );
    arrowDown.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] + 1);}
    );
    arrowLeft.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] - 1, 1);}
    );
    arrowRight.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] + 1, 1);}
    )
    const init = () => {
      slideCount = countSlides();
      activateSlideSafe(1, 1);
      addKeyControls();
      addSwipeControls();
    }

    // count slides
    const countSlides = () => {
      const counts = [];
      return [...document.querySelectorAll('.section')].map(section => section.childNodes.length);
    }

    const updateVisible = () => {
      for (let section of document.querySelectorAll('.section')) {
        if (section.id === `section-${activeSlide[0]}`) {
          section.className = 'section active';
        } else {
          section.className = 'section inactive';
        }
      }
      for (let slide of document.querySelectorAll('.slide')) {
        if (slide.id === `slide-${activeSlide[0]}-${activeSlide[1]}`) {
          slide.className = 'slide active';
        } else {
          slide.className = 'slide inactive';
        }
      }
    }

    const updatePageArrows = () => {
      if (slideCount.length === 1) {
        arrowLeft.style.opacity = "0";
        arrowRight.style.opacity = "0";
      } else {
        const progressSections = (activeSlide[0] - 1) / (slideCount.length - 1);
        arrowLeft.style.opacity = progressSections.toString();
        arrowRight.style.opacity = (1 - progressSections).toString();
      }
      const slidesInActiveSection = slideCount[activeSlide[0] - 1]
      if (slidesInActiveSection === 1) {
        arrowUp.style.opacity = "0";
        arrowDown.style.opacity = "0";
      } else {
        const progressSlides = (activeSlide[1] - 1) / (slidesInActiveSection - 1);
        arrowUp.style.opacity = progressSlides.toString();
        arrowDown.style.opacity = (1 - progressSlides).toString();
      }
    }

    /**
     * Activate a slide if it exists, else do nothing
    */
    const activateSlideSafe = (sectionIndex, slideIndex) => {
      if (1 <= sectionIndex && sectionIndex <= slideCount.length && 1 <= slideIndex && slideIndex <= slideCount[sectionIndex - 1]) {
        activeSlide = [sectionIndex, slideIndex];
        updateVisible();
        updatePageArrows();
        scrolltoActiveSlide();
      }
    }

    const activateSlideNextSafe = () => {
      if (activeSlide[1] === slideCount[activeSlide[0] - 1]) {
        activateSlideSafe(activeSlide[0] + 1, 1);
      } else {
        activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
      }
    }

    const activateSlideRightSafe = () => {
      activateSlideSafe(activeSlide[0] + 1, 1);
    }

    const activateSlideLeftSafe = () => {
      activateSlideSafe(activeSlide[0] - 1, 1);
    }

    const activateSlideDownSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
    }

    const activateSlideUpSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] - 1);
    }

    const scrolltoActiveSlide = () => {
      const slideId = `#slide-${activeSlide[0]}-${activeSlide[1]}`;
      if (presenterWindow) {
        const activeSlide = presenterWindow.document.querySelector(slideId);
        if (activeSlide) {
          activeSlide.scrollIntoView();
        }
      }
    }

    const addKeyControls = () => {
      document.querySelector('body').addEventListener('keydown', event => {
        if (event.key === 'p') {
          const canvasContent = document.querySelector('#canvas-content').innerHTML;
          presenterWindow = window.open(document.URL, '_blank');
          presenterWindow.onload = () => {
            presenterWindow.document.querySelector('body').innerHTML = canvasContent;
          }
        }
        if (event.key === 'ArrowRight') {
          activateSlideRightSafe();
        } else if (event.key === 'ArrowLeft') {
          activateSlideLeftSafe();
        } else if (event.key === 'ArrowDown') {
          activateSlideDownSafe();
        } else if (event.key === 'ArrowUp') {
          activateSlideUpSafe();
        } else if (event.key === 'Enter') {
          activateSlideNextSafe();
        }
      });
    }

    const addSwipeControls = () => {

      const distance = 100;

      let startPos;
      let handled;

      document.addEventListener('touchstart', event => {
        startPos = event.touches[0];
        handled = false;
      });

      document.addEventListener('touchmove', event => {
        if (!handled) {
          let currentPos = event.touches[0];
          const xDiff = currentPos.clientX - startPos.clientX;
          const yDiff = currentPos.clientY - startPos.clientY;
          if (Math.abs(xDiff) > 2*Math.abs(yDiff) ||
              Math.abs(yDiff) > 2*Math.abs(xDiff)) {
            if (xDiff > distance) {
              activateSlideLeftSafe();
              handled = true;
            } else if (xDiff < -distance) {
              activateSlideRightSafe();
              handled = true;
            } else if (yDiff > distance) {
              activateSlideUpSafe();
              handled = true;
            } else if (yDiff < -distance) {
              activateSlideDownSafe();
              handled = true;
            }
          }
        }
      });
    }

    init();

  </script>
</body>

</html>